<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Merge rows with duplicate alerts — merge_duplicate_alerts • promedr</title>


<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha256-916EbMg70RQy9LHiGkXzG8hSg9EdNy97GazNG/aiY1w=" crossorigin="anonymous" />

<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.7.1/css/all.min.css" integrity="sha256-nAmazAk6vS34Xqo0BSrTb+abbtFlgsFK7NKSi6o7Y78=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.7.1/css/v4-shims.min.css" integrity="sha256-6qHlizsOWFskGlwVOKuns+D1nB6ssZrHQrNj1wGplHc=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/headroom.min.js" integrity="sha256-DJFC1kqIhelURkuza0AvYal5RxMtpzLjFhsnVIeuk+U=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="Merge rows with duplicate alerts — merge_duplicate_alerts" />
<meta property="og:description" content="Each record in ProMED and HealthMap data feeds is (in principle)
associated with
a unique alert-id. Occasionally, we get multiple rows that have
the same alert-id. In such instances, we want to merge these rows
into a single row in a meaningful way. For the meta-data associated
with the records e.g., the URL, it would be useful to retain all
of them, especially if these columns are not being used in the
analysis downstream. For others, e.g., the longitude and latitude,
we expect them to be the same across the set of records, but if they
are not, we want to retain one of them. Finally, for numeric columns
(particularly cases) we want a summary statistic like median or
mean.
This function merges the records with the user picking which
columns should be merged in which way i.e., whether all values
or only one of them should be retained.
The only exception is the column called cases, which is always
summarised using a mathematical function specified by the arg rule." />
<meta name="twitter:card" content="summary" />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body>
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">promedr</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.0.0.9000</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/sangeetabhatia03/promedr">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Merge rows with duplicate alerts</h1>
    <small class="dont-index">Source: <a href='https://github.com/sangeetabhatia03/promedr/blob/master/R/merge_duplicate_alerts.R'><code>R/merge_duplicate_alerts.R</code></a></small>
    <div class="hidden name"><code>merge_duplicate_alerts.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Each record in ProMED and HealthMap data feeds is (in principle)
associated with
a unique alert-id. Occasionally, we get multiple rows that have
the same alert-id. In such instances, we want to merge these rows
into a single row in a meaningful way. For the meta-data associated
with the records e.g., the URL, it would be useful to retain all
of them, especially if these columns are not being used in the
analysis downstream. For others, e.g., the longitude and latitude,
we expect them to be the same across the set of records, but if they
are not, we want to retain one of them. Finally, for numeric columns
(particularly cases) we want a summary statistic like median or
mean.
This function merges the records with the user picking which
columns should be merged in which way i.e., whether all values
or only one of them should be retained.
The only exception is the column called cases, which is always
summarised using a mathematical function specified by the arg rule.</p>
    </div>

    <pre class="usage"><span class='fu'>merge_duplicate_alerts</span>(
  <span class='no'>df</span>,
  <span class='no'>keep_all</span>,
  <span class='no'>keep_first</span>,
  <span class='kw'>rule</span> <span class='kw'>=</span> <span class='kw pkg'>stats</span><span class='kw ns'>::</span><span class='no'><a href='https://rdrr.io/r/stats/median.html'>median</a></span>,
  <span class='kw'>sep</span> <span class='kw'>=</span> <span class='st'>" / "</span>
)</pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>df</th>
      <td><p>data frame containing duplicate alerts. Must contain a
column called cases. All columns except cases will be merged by
collpasing their content into a single string for each column.
The column cases will be merged accrding to the rule argument.
E.g., median will return the median of cases.</p></td>
    </tr>
    <tr>
      <th>keep_all</th>
      <td><p>character vector. Names of columns for which values
in all rows should be retained.</p></td>
    </tr>
    <tr>
      <th>keep_first</th>
      <td><p>character vector. Names of columns for which values
for which only the first value should be retained.</p></td>
    </tr>
    <tr>
      <th>rule</th>
      <td><p>any valid R function that accepts a numeric vector
and returns a number. Defaults to median</p></td>
    </tr>
    <tr>
      <th>sep</th>
      <td><p>separator used to paste multiple values
from a column</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>data.frame with a single row</p>

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='co'>## Made-up data</span>
<span class='no'>made_up</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/data.frame.html'>data.frame</a></span>(
   <span class='kw'>country</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/rep.html'>rep</a></span>(<span class='st'>"singapore"</span>, <span class='fl'>3</span>),
   <span class='kw'>cases</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(<span class='fl'>3</span>, <span class='fl'>7</span>, <span class='fl'>9</span>),
   <span class='kw'>alert_id</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/rep.html'>rep</a></span>(<span class='no'>letters</span>[<span class='fl'>1</span>], <span class='fl'>3</span>),
   <span class='kw'>longitude</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(<span class='fl'>103.8</span>, <span class='fl'>103.8</span>, <span class='fl'>103.8</span>),
   <span class='kw'>latitude</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(<span class='fl'>1.4</span>, <span class='fl'>1.5</span>, <span class='fl'>1.4</span>)
)
<span class='co'>##Alert-ids in this data.frame are duplicated. Merging the rows then</span>
<span class='no'>merged</span> <span class='kw'>&lt;-</span>  <span class='fu'>merge_duplicate_alerts</span>(
  <span class='no'>made_up</span>,
  <span class='kw'>keep_all</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(<span class='st'>"country"</span>, <span class='st'>"alert_id"</span>),
  <span class='kw'>keep_first</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(<span class='st'>"longitude"</span>, <span class='st'>"latitude"</span>))</div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <h2>Contents</h2>
    <ul class="nav nav-pills nav-stacked">
      <li><a href="#arguments">Arguments</a></li>
      <li><a href="#value">Value</a></li>
      <li><a href="#examples">Examples</a></li>
    </ul>

    <h2>Author</h2>
    <p>Sangeeta Bhatia</p>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by Sangeeta Bhatia.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.4.1.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


